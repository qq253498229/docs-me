<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3.协议端点 :: docs-me</title>
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">docs-me</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs-antora-oauth2.1" data-version="0.0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">OAuth 2.1 授权框架</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1-introduction.html">1.介绍</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2-client-registration.html">2.客户端注册</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="3-protocol-endpoints.html">3.协议端点</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="4-grant-types.html">4.授权类型</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="5-resource-requests.html">5.资源请求</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="6-extensibility.html">6.可扩展性</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="7-security-considerations.html">7.安全考虑</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="8-native-applications.html">8.原生应用程序</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="9-section-9.html">9.基于浏览器的应用程序</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="10-differences-from-oauth-20.html">10.与OAuth 2.0的不同之处</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="11-iana-considerations.html">11.IANA考虑因素</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="12-references.html">12.参考文献</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-a.html">附录A</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-b.html">附录B</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-c.html">附录C</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-d.html">附录D</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-e.html">附录E</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appendix-f.html">附录F</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="authors-addresses.html">作者邮箱</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OAuth 2.1 授权框架</span>
    <span class="version">0.0.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../docs-config/0.0.1/index.html">docs-config</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-config/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-steam-electron/0.0.1/index.html">docs-steam-electron</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-steam-electron/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-xiuxian/0.0.1/index.html">docs-xiuxian</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-xiuxian/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-es-java/7.16.0/introduction.html">ES Java API Client</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-es-java/7.16.0/introduction.html">7.16.0</a>
        </li>
        <li class="version">
          <a href="../../docs-es-java/6.8.0/preface.html">6.8.0</a>
        </li>
        <li class="version">
          <a href="../../docs-es-java/6.2.2/1Preface/readme.html">6.2.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-greenworks-js/0.0.1/index.html">Greenworks-JS 文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-greenworks-js/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-rust-libp2p/0.0.1/index.html">libp2p入门</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-rust-libp2p/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-neutralino-api/0.0.1/index.html">NeutralinoJS 文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-neutralino-api/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="index.html">OAuth 2.1 授权框架</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-pd2/0.0.1/index.html">PD2记录</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-pd2/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-peerjs/0.0.1/index.html">PEER JS</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-peerjs/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-actuator/3.3.3/index.html">Spring Boot Actuator</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-actuator/3.3.3/index.html">3.3.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-oauth2/0.0.1/index.html">Spring Boot OAuth2</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-oauth2/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-steamworks-rs/0.11.0/index.html">Steamworks for Rust</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-steamworks-rs/0.11.0/index.html">0.11.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-tauri/v1/index.html">Tauri API 文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-tauri/v1/index.html">v1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-testing-angular/中文/start.html">Testing Angular</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-testing-angular/中文/start.html">中文</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-me/0.0.1/index.html">个人记录</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-me/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-taiwu/0.0.1/index.html">太吾绘卷</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-taiwu/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-palworld/0.0.1/index.html">幻兽帕鲁笔记</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-palworld/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-building-event-driven-microservices/0.0.1/index.html">微服务与事件驱动架构</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-building-event-driven-microservices/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-hunter/0.0.1/index.html">猎人-荒野的呼唤</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-hunter/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-logitech/v8.45/index.html">罗技鼠标宏文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-logitech/v8.45/index.html">v8.45</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-milk/0.0.1/index.html">银河奶牛</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-milk/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs-me/0.0.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OAuth 2.1 授权框架</a></li>
    <li><a href="3-protocol-endpoints.html">3.协议端点</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/qq253498229/docs-antora-oauth2.1/edit/master/modules/ROOT/pages/3-protocol-endpoints.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="目录" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">3.协议端点</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>授权过程使用两个授权服务器端点（HTTP资源）：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>授权端点——客户端通过用户代理重定向从资源所有者处获得授权。</p>
</li>
<li>
<p>令牌端点——客户端用于交换授权许可以获得访问令牌，通常需要进行客户端身份验证。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>以及一个客户端端点：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>重定向端点——授权服务器通过资源所有者用户代理将包含授权凭据的响应返回给客户端。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>并非每种授权许可类型都使用这两个端点。扩展许可类型可以根据需要定义其他端点。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authorization-endpoint"><a class="anchor" href="#authorization-endpoint"></a>3.1.授权端点</h2>
<div class="sectionbody">
<div class="paragraph">
<p>授权端点用于与资源所有者交互并获得授权许可。授权服务器必须先对资源所有者进行身份验证。授权服务器对资源所有者进行身份验证的方式（例如，用户名和密码登录、通行密钥、联合登录，或使用已建立的会话）不在本规范的范围内。</p>
</div>
<div class="paragraph">
<p>客户端获取授权端点URL的方式不在本规范的范围内，但该URL通常在服务文档或授权服务器的元数据文档[<a href="12-references.html#RFC8414" class="xref page">RFC8414</a>]中提供。</p>
</div>
<div class="paragraph">
<p>授权端点URL不得包含片段组件，并且可包含查询字符串组件（<a href="appendix-c.html#query-string-serialization" class="xref page">附录C.1</a>），在添加其他查询参数时必须保留该组件。</p>
</div>
<div class="paragraph">
<p>授权服务器必须支持在授权端点使用[<a href="12-references.html#RFC9110" class="xref page">RFC9110</a>]第9.3.1节的HTTP GET方法，并且也可以支持POST方法（[<a href="12-references.html#RFC9110" class="xref page">RFC9110</a>]第9.3.3节）。</p>
</div>
<div class="paragraph">
<p>授权服务器必须忽略发送到授权端点的未识别请求参数。</p>
</div>
<div class="paragraph">
<p>本规范定义的请求和响应参数不得包含超过一次。未发送值的参数必须视为已从请求中省略。</p>
</div>
<div class="paragraph">
<p>如果授权服务器重定向可能包含用户凭据的请求，则必须避免意外转发这些用户凭据（有关详细信息，请参见 <a href="7-security-considerations.html#http-307-redirect" class="xref page">第7.5.4节</a>）。</p>
</div>
<div class="paragraph">
<p>授权端点不得支持跨源资源共享[<a href="12-references.html#WHATWG.CORS" class="xref page">WHATWG.CORS</a>]，因为客户端不直接访问此端点，而是将用户代理重定向到该端点。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="token-endpoint"><a class="anchor" href="#token-endpoint"></a>3.2.令牌端点</h2>
<div class="sectionbody">
<div class="paragraph">
<p>客户端使用令牌端点通过如 <a href="4-grant-types.html" class="xref page">第4节</a> 和 <a href="4-grant-types.html#refresh-token-grant" class="xref page">第4.3节</a>所述的授权来获取访问令牌。</p>
</div>
<div class="paragraph">
<p>本规范不涉及客户端获取令牌端点URL的方式，但URL通常会在服务文档中提供，并在客户端开发期间进行配置，或者在授权服务器的元数据文档[<a href="12-references.html#RFC8414" class="xref page">RFC8414</a>]中提供，并在运行时通过程序获取。</p>
</div>
<div class="paragraph">
<p>令牌端点URL必须不包含片段组件，并且可以包含查询字符串组件（见 <a href="appendix-c.html#query-string-serialization" class="xref page">附录C.1</a>）。</p>
</div>
<div class="paragraph">
<p>客户端在向令牌端点发出请求时必须使用HTTP POST方法。</p>
</div>
<div class="paragraph">
<p>授权服务器必须忽略发送到令牌端点的未识别请求参数。</p>
</div>
<div class="paragraph">
<p>未发送值的参数必须视为已从请求中省略。本规范定义的请求和响应参数在请求中不得重复出现。</p>
</div>
<div class="paragraph">
<p>希望支持基于浏览器的应用程序（仅在客户端JavaScript中运行且无法访问支持的后端服务器的应用程序）的授权服务器需要确保令牌端点支持必要的CORS[<a href="12-references.html#WHATWG.CORS" class="xref page">WHATWG.CORS</a>]头，以便应用程序能够看到响应。如果授权服务器向应用程序提供其他端点，如元数据URL、动态客户端注册、吊销、内省、发现或用户信息端点，这些端点也可以由基于浏览器的应用程序访问，并且也需要定义CORS头以允许访问。有关详细信息，请参阅[<a href="12-references.html#I-D.ietf-oauth-browser-based-apps" class="xref page">I-D.ietf-oauth-browser-based-apps</a>]。</p>
</div>
<div class="sect2">
<h3 id="client-authentication-2"><a class="anchor" href="#client-authentication-2"></a>3.2.1.客户端认证</h3>
<div class="paragraph">
<p>机密客户端在向令牌端点发出请求时，必须按照 <a href="2-client-registration.html#client-authentication" class="xref page">第2.4节</a>所述对授权服务器进行认证。</p>
</div>
<div class="paragraph">
<p>客户端认证用于：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>强制执行刷新令牌和授权码与其颁发客户端的绑定。当授权码通过不安全通道传输到重定向端点时，客户端认证增加了额外的安全层。</p>
</li>
<li>
<p>通过禁用客户端或更改其凭据来从受损客户端中恢复，从而防止攻击者滥用被盗的刷新令牌。更改一组客户端凭据的速度明显快于吊销一组完整的刷新令牌。</p>
</li>
<li>
<p>实施身份验证管理最佳实践，这要求定期轮换凭据。轮换一组完整的刷新令牌可能具有挑战性，而轮换一组客户端凭据则容易得多。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="token-request"><a class="anchor" href="#token-request"></a>3.2.2.令牌请求</h3>
<div class="paragraph">
<p>客户端通过使用 <a href="appendix-c.html#form-encoded-serialization" class="xref page">附录C.2</a>中的表单编码序列化格式，并在HTTP请求内容中使用UTF-8字符编码，发送以下参数向令牌端点发出请求：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>“grant_type”</strong></dt>
<dd>
<p>必填项。客户端在特定令牌请求中使用的授权类型标识符。本规范定义了authorization_code、refresh_token和client_credentials这三个值。授权类型决定了令牌请求所需或支持的其他参数。这些授权类型的详细信息如下所述。</p>
</dd>
<dt class="hdlist1"><strong>“client_id”</strong></dt>
<dd>
<p>可选项。当使用依赖于该参数的客户端身份验证形式时，或当grant_type要求识别公共客户端时，需要客户端标识符。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>保密客户端必须按照 <a href="#client-authentication-2">第3.2.1节</a>中的描述向授权服务器进行身份验证。</p>
</div>
<div class="paragraph">
<p>例如，客户端发出以下HTTP请求（仅为了显示目的而添加了额外的换行符）：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>POST /token HTTP/1.1 +
Host: server.example.com +
Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW +
Content-Type: application/x-www-form-urlencoded</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>grant_type=authorization_code&amp;code=SplxlOBeZQQYbYS6WxSbIA
&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb
&amp;code_verifier=3641a2d12d66101249cdf7a79c000c1f8c05d2aafcf14bf146497bed</pre>
</div>
</div>
<div class="paragraph">
<p>授权服务器必须：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>对机密客户端（或有其他身份验证要求的客户端）要求客户端身份验证，</p>
</li>
<li>
<p>如果包含客户端身份验证，则对客户端进行身份验证</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>此外，还适用并指定了与各自授权类型相关的特定处理规则。</p>
</div>
</div>
<div class="sect2">
<h3 id="token-response"><a class="anchor" href="#token-response"></a>3.2.3.Token 响应</h3>
<div class="paragraph">
<p>如果访问令牌请求有效且已授权，授权服务器将颁发一个访问令牌和一个可选的刷新令牌。</p>
</div>
<div class="paragraph">
<p>如果请求客户端身份验证失败或无效，授权服务器将按照 <a href="#error-response">第3.2.4节</a>所述返回错误响应。</p>
</div>
<div class="paragraph">
<p>授权服务器通过根据 <a href="appendix-c.html#json-serialization" class="xref page">附录 C.3</a> 创建一个 HTTP 响应来颁发访问令牌和一个可选的刷新令牌，使用 [<a href="12-references.html#RFC8259" class="xref page">RFC8259</a>] 中定义的 application/json 媒体类型，并包含以下参数和一个 HTTP 200（OK）状态码：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>"access_token"</strong></dt>
<dd>
<p>必填。授权服务器颁发的访问令牌。</p>
</dd>
<dt class="hdlist1"><strong>"token_type"</strong></dt>
<dd>
<p>必填。如 <a href="1-introduction.html#access-token" class="xref page">第1.4节</a>所述颁发的访问令牌的类型。值不区分大小写。</p>
</dd>
<dt class="hdlist1"><strong>"expires_in"</strong></dt>
<dd>
<p>建议填写。一个 JSON 数字，表示访问令牌的生存时间（秒）。例如，值 3600 表示访问令牌将在响应生成后的一小时内过期。如果省略，授权服务器应通过其他方式提供过期时间或记录默认值。</p>
</dd>
<dt class="hdlist1"><strong>"scope"</strong></dt>
<dd>
<p>如果与客户端请求的范围相同，则为建议填写；否则为必填。如 <a href="1-introduction.html#access-token-scope" class="xref page">第1.4.1节</a>所述的访问令牌的范围。</p>
</dd>
<dt class="hdlist1"><strong>"refresh_token"</strong></dt>
<dd>
<p>可选。刷新令牌，可用于根据在相应令牌请求中传递的授权获取新的访问令牌。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>授权服务器应根据风险评估和自身策略确定是否向某个客户端颁发刷新令牌。如果授权服务器决定不颁发刷新令牌，客户端可以通过重新启动 OAuth 流（例如，发起新的授权码请求）来获取新的访问令牌。在这种情况下，授权服务器可以使用 cookie 和持久性授权来优化用户体验。</p>
</div>
<div class="paragraph">
<p>如果颁发了刷新令牌，则这些刷新令牌必须与资源所有者同意的范围和资源服务器绑定。这是为了防止合法客户端的权限提升，并减少刷新令牌泄露的影响。</p>
</div>
<div class="paragraph">
<p>参数被序列化为 <a href="appendix-c.html#json-serialization" class="xref page">附录 C.3</a> 中所述的 JavaScript 对象表示法 (JSON) 结构。</p>
</div>
<div class="paragraph">
<p>授权服务器必须在包含令牌、凭据或其他敏感信息的任何响应中包含 HTTP Cache-Control 响应头字段（见 [<a href="12-references.html#RFC9111" class="xref page">RFC9111</a>] 的第 5.2 节），其值设置为 no-store。</p>
</div>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>HTTP/1.1 200 OK +
Content-Type: application/json +
Cache-Control: no-store</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>{
"access_token":"2YotnFZFEjr1zCsicMWpAA",
"token_type":"Bearer",
"expires_in":3600,
"refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",
"example_parameter":"example_value"
}</pre>
</div>
</div>
<div class="paragraph">
<p>客户端必须忽略响应中未识别的值名称。从授权服务器接收到的令牌和其他值的大小未定义。客户端应避免对值的大小做出假设。授权服务器应该记录其发出的任何值的大小。</p>
</div>
</div>
<div class="sect2">
<h3 id="error-response"><a class="anchor" href="#error-response"></a>3.2.4.错误响应</h3>
<div class="paragraph">
<p>授权服务器以 HTTP 400（Bad Request）状态码（除非另有规定）进行响应，并在响应中包含以下参数：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>"error"</strong></dt>
<dd>
<p>必填。从以下选项中选择一个 ASCII [<a href="12-references.html#USASCII" class="xref page">USASCII</a>] 错误代码：</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>"invalid_request"</strong></dt>
<dd>
<p>请求缺少必需参数、包含不受支持的参数值（授权类型除外）、重复参数、包含多个凭据、使用多种客户端身份验证机制、包含 code_verifier 但在授权请求中未发送 code_challenge，或以其他方式格式错误。</p>
</dd>
<dt class="hdlist1"><strong>"invalid_client"</strong></dt>
<dd>
<p>客户端身份验证失败（例如，未知客户端、未包含客户端身份验证或不支持的身份验证方法）。授权服务器可以返回 HTTP 401（Unauthorized）状态码来指示支持哪些 HTTP 身份验证方案。如果客户端尝试通过 Authorization 请求头字段进行身份验证，授权服务器必须以 HTTP 401（Unauthorized）状态码进行响应，并包含与客户端使用的身份验证方案相匹配的 WWW-Authenticate 响应头字段。</p>
</dd>
<dt class="hdlist1"><strong>"invalid_grant"</strong></dt>
<dd>
<p>提供的授权许可（例如，授权码、资源所有者凭证）或刷新令牌无效、已过期、已被撤销、与授权请求中使用的重定向URI不匹配，或已颁发给另一个客户端。</p>
</dd>
<dt class="hdlist1"><strong>"unauthorized_client"</strong></dt>
<dd>
<p>经过身份验证的客户端未获授权使用此授权许可类型。</p>
</dd>
<dt class="hdlist1"><strong>"unsupported_grant_type"</strong></dt>
<dd>
<p>授权服务器不支持此授权许可类型。</p>
</dd>
<dt class="hdlist1"><strong>"invalid_scope"</strong></dt>
<dd>
<p>请求的范围无效、未知、格式错误，或超出了资源所有者授予的范围。</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>error参数的值必须不包含 %x20-21 / %x23-5B / %x5D-7E 集合之外的字符。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>"error_description"</strong></dt>
<dd>
<p>可选。提供附加信息的人类可读ASCII [<a href="12-references.html#USASCII" class="xref page">USASCII</a>]文本，用于帮助客户端开发人员理解发生的错误。error_description参数的值必须不包含%x20-21 / %x23-5B / %x5D-7E集合之外的字符。</p>
</dd>
<dt class="hdlist1"><strong>"error_uri"</strong></dt>
<dd>
<p>可选。一个URI，用于标识包含有关错误信息的可读网页，以便为客户端开发人员提供有关错误的附加信息。error_uri参数的值必须符合URI引用语法，因此必须不包含%x21 / %x23-5B / %x5D-7E集合之外的字符。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>这些参数使用 <a href="appendix-c.html#json-serialization" class="xref page">附录C.3</a> 中定义的application/json媒体类型包含在HTTP响应的内容中。</p>
</div>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>HTTP/1.1 400 Bad Request +
Content-Type: application/json +
Cache-Control: no-store</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>{
"error": "invalid_request"
}</pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
