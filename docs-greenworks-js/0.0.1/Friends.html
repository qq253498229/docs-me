<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>好友 :: 我的文档</title>
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">我的文档</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false"
              aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">主页</a>
        <a class="navbar-item" href="https://github.com/qq253498229/docs-me">源代码</a>
        <!--        <div class="navbar-item has-dropdown is-hoverable">-->
        <!--          <a class="navbar-link" href="#">Products</a>-->
        <!--          <div class="navbar-dropdown">-->
        <!--            <a class="navbar-item" href="#">Product A</a>-->
        <!--            <a class="navbar-item" href="#">Product B</a>-->
        <!--            <a class="navbar-item" href="#">Product C</a>-->
        <!--          </div>-->
        <!--        </div>-->
        <!--        <div class="navbar-item has-dropdown is-hoverable">-->
        <!--          <a class="navbar-link" href="#">Services</a>-->
        <!--          <div class="navbar-dropdown">-->
        <!--            <a class="navbar-item" href="#">Service A</a>-->
        <!--            <a class="navbar-item" href="#">Service B</a>-->
        <!--            <a class="navbar-item" href="#">Service C</a>-->
        <!--          </div>-->
        <!--        </div>-->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary"
               href="https://github.com/qq253498229/docs-me/releases/download/latest/docs.zip">
             下载
            </a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs-greenworks-js" data-version="0.0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Greenworks-JS 文档</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Authentication.html">身份认证</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Achievement.html">成就</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Cloud.html">Steam 云服务</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="DLC.html">DLC</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Events.html">事件</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="Friends.html">好友</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Setting.html">环境设置</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Stats.html">统计</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Utils.html">工具方法</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Workshop.html">创意工坊</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Lobby.html">匹配大厅</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Greenworks-JS 文档</span>
    <span class="version">0.0.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="index.html">Greenworks-JS 文档</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-pd2/0.0.1/index.html">PD2记录</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-pd2/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-peerjs/0.0.1/index.html">PEER JS</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-peerjs/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-actuator/3.3.3/index.html">Spring Boot Actuator</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-actuator/3.3.3/index.html">3.3.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-spring-boot-admin/0.0.1/index.html">SpringBootAdmin文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-spring-boot-admin/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-steamworks-rs/0.11.0/index.html">Steamworks for Rust</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-steamworks-rs/0.11.0/index.html">0.11.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-tauri/v1/index.html">Tauri API 文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-tauri/v1/index.html">v1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-testing-angular/中文/start.html">Testing Angular</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-testing-angular/中文/start.html">中文</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-me/0.0.1/index.html">个人记录</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-me/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-taiwu/0.0.1/index.html">太吾绘卷</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-taiwu/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-palworld/0.0.1/index.html">幻兽帕鲁笔记</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-palworld/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs-me/0.0.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Greenworks-JS 文档</a></li>
    <li><a href="Friends.html">好友</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/qq253498229/docs-greenworks-js/edit/master/modules/ROOT/pages/Friends.adoc">编辑本页</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="目录" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">好友</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>好友API可以让您获取好友列表数据以及用户的基本信息。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var greenworks = require('./greenworks');

if (greenworks.init()) {
  greenworks.on('persona-state-change',
                function(steam_id, persona_change_flag) {
    if (persona_change_flag == greenworks.PersonaChange.Name)
      console.log("Change to new name: " + steam_id.getPersonaName());
  });

  greenworks.on('game-connected-friend-chat-message',
                function(steam_id, message_id) {
    var info = greenworks.getFriendMessage(steam_id.getRawSteamID(), message_id,
                                           2048);
    if (info.chatEntryType == greenworks.ChatEntryType.ChatMsg) {
      var message = info.message;
      console.log("Receive a message from " + steam_id.getPersonaName() + ": " +
                  message);
      greenworks.replyToFriendMessage(steam_id.getRawSteamID(),
                                      "Hello, I received your message.");
    }
  });

  // Listen to messages from friends.
  greenworks.setListenForFriendsMessage(true);

  // Get the number of regular friends.
  console.log(greenworks.getFriendCount(greenworks.FriendFlags.Immediate));
  var friends = greenworks.getFriends(greenworks.FriendFlags.Immediate);
  for (var i = 0; i &lt; friends.length; ++i) {
    console.log(friends[i].getPersonaName());
    greenworks.requestUserInformation(friends[i].getRawSteamID(), true);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_对象"><a class="anchor" href="#_对象"></a>1. 对象</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_好友标识位"><a class="anchor" href="#_好友标识位"></a>1.1. 好友标识位</h3>
<div class="paragraph">
<p><strong>greenworks.FriendFlags</strong></p>
</div>
<div class="paragraph">
<p>代表SteamSDK中的 <code>EFriendFlags</code>，用于获取一个枚举好友列表，或者是快速查看用户之间的关系。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>None</code> (0.无)</p>
</li>
<li>
<p><code>Blocked</code> (1.当前用户已经忽略的用户)</p>
</li>
<li>
<p><code>FriendshipRequested</code> (2.已经向当前用户发送好友申请的用户)</p>
</li>
<li>
<p><code>Immediate</code> (4.当前用户的"常规"好友)</p>
</li>
<li>
<p><code>ClanMember</code> (8.与当前用户同属于一个Steam小组的用户)</p>
</li>
<li>
<p><code>OnGameServer</code> (16.与当前用户在同一个游戏服务器上的好友;通过 <a href="#SetPlayedWith">设置和谁一起玩过</a> 设置)</p>
</li>
<li>
<p><code>RequestingFriendship</code> (128.当前用户已经向其发送好友申请的用户)</p>
</li>
<li>
<p><code>RequestingInfo</code> (256.在调用 <a href="#RequestUserInformation">请求用户信息</a> 后正在发送自己额外信息的用户)</p>
</li>
<li>
<p><code>Ignored</code> (512.当前用户已经屏蔽与他们联系的用户)</p>
</li>
<li>
<p><code>IgnoredFriend</code> (1024.屏蔽当前用户的用户;但是当前用户仍然知道他们)</p>
</li>
<li>
<p><code>ChatMember</code> (4096.在同一个聊天中的用户)</p>
</li>
<li>
<p><code>All</code> (65535.返回所有好友的标识位)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="FriendRelationship"><a class="anchor" href="#FriendRelationship"></a>1.2. 好友关系</h3>
<div class="paragraph">
<p><strong>greenworks.FriendRelationship</strong></p>
</div>
<div class="paragraph">
<p>代表SteamSDK中的 <code>EFriendRelationship</code>（和其它用户的关系）。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>None</code> (0.没有关系的用户)</p>
</li>
<li>
<p><code>Blocked</code> (1.用户刚刚点击了好友邀请上的忽略。这不会被存储)</p>
</li>
<li>
<p><code>RequestRecipient</code> (2.已经申请与当前用户成为朋友的用户)</p>
</li>
<li>
<p><code>Friend</code> (3."常规"好友)</p>
</li>
<li>
<p><code>RequestInitiator</code> (4.当前用户已经发送好友申请的用户)</p>
</li>
<li>
<p><code>Ignored</code> (5.当前用户已经明确屏蔽此用户发表的评论、聊天等。这是会被存储的)</p>
</li>
<li>
<p><code>IgnoredFriend</code> (6.已经屏蔽当前用户的用户)</p>
</li>
<li>
<p><code>Suggested</code> (7.已废弃&#8201;&#8212;&#8201;未使用)</p>
</li>
<li>
<p><code>Max</code> (8.未使用&#8201;&#8212;&#8201;用于循环判断朋友关系的总数)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_资料变化"><a class="anchor" href="#_资料变化"></a>1.3. 资料变化</h3>
<div class="paragraph">
<p><strong>greenworks.PersonaChange</strong></p>
</div>
<div class="paragraph">
<p>代表SteamSDK中的 <code>EPersonaChange</code>，用于 <code>persona-state-change</code> 事件。</p>
</div>
<div class="paragraph">
<p>它描述了客户端最近了解到发生了哪些变化，所以在启动时，你会看到每个好友的名字、头像以及好友关系的变化。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Name</code> (1)</p>
</li>
<li>
<p><code>Status</code> (2)</p>
</li>
<li>
<p><code>ComeOnline</code> (4)</p>
</li>
<li>
<p><code>GoneOffline</code> (8)</p>
</li>
<li>
<p><code>GamePlayed</code> (16)</p>
</li>
<li>
<p><code>GameServer</code> (32)</p>
</li>
<li>
<p><code>Avatar</code> (64)</p>
</li>
<li>
<p><code>JoinedSource</code> (128)</p>
</li>
<li>
<p><code>LeftSource</code> (256)</p>
</li>
<li>
<p><code>RelationshipChanged</code> (512)</p>
</li>
<li>
<p><code>NameFirstSet</code> (1024)</p>
</li>
<li>
<p><code>FacebookInfo</code> (2048)</p>
</li>
<li>
<p><code>NickName</code> (4096)</p>
</li>
<li>
<p><code>SteamLevel</code> (8192)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_账号类型"><a class="anchor" href="#_账号类型"></a>1.4. 账号类型</h3>
<div class="paragraph">
<p><strong>greenworks.AccountType</strong></p>
</div>
<div class="paragraph">
<p>代表SteamSDK中的 <code>EAccountType</code>（Steam 账户类型）。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Invalid</code> (0.用于无效 Steam ID)</p>
</li>
<li>
<p><code>Individual</code> (1.普通用户帐户)</p>
</li>
<li>
<p><code>Multiseat</code> (2.多座位（如网吧）帐户)</p>
</li>
<li>
<p><code>GameServer</code> (3.持久（非匿名）游戏服务器帐户)</p>
</li>
<li>
<p><code>AnonymousGameServer</code> (4.匿名游戏服务器帐户)</p>
</li>
<li>
<p><code>Pending</code> (5.待处理)</p>
</li>
<li>
<p><code>ContentServer</code> (6.Valve 内部内容服务器帐户)</p>
</li>
<li>
<p><code>Clan</code> (7.Steam 组（群组）)</p>
</li>
<li>
<p><code>Chat</code> (8.Steam 组聊天或大厅)</p>
</li>
<li>
<p><code>ConsoleUser</code> (9.虚拟 Steam ID，用于 PS3 本地 PSN 帐户或 360 Live 帐户等)</p>
</li>
<li>
<p><code>AnonymousUser</code> (10.匿名用户帐户 （用来创建帐户或重置密码）)</p>
</li>
<li>
<p><code>Max</code> (11.此字段最多 16 项)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_聊天消息类型"><a class="anchor" href="#_聊天消息类型"></a>1.5. 聊天消息类型</h3>
<div class="paragraph">
<p><strong>greenworks.ChatEntryType</strong></p>
</div>
<div class="paragraph">
<p>Represents Steam SDK <code>EChatEntryType</code> (previously was only friend-to-friend message types).</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Invalid</code> （0无效。）</p>
</li>
<li>
<p><code>ChatMsg</code> （1来自其他用户的普通文本消息。）</p>
</li>
<li>
<p><code>Typing</code> （2另一用户正在输入，不用于多用户群聊。）</p>
</li>
<li>
<p><code>InviteGame</code> （3其他用户邀请进入当前进行的游戏。）</p>
</li>
<li>
<p><code>Emote</code> （4文本表情包（已弃用，应视作 ChatMsg 处理）。）</p>
</li>
<li>
<p><code>LeftConversation</code> （6一名用户离开了对话（关闭了对话窗口）。）</p>
</li>
<li>
<p><code>Entered</code> （7用户加入聊天，用于多用户群聊与组聊天。）</p>
</li>
<li>
<p><code>WasKicked</code> （8用户被踢出（数据：执行踢出操作的用户的 Steam ID）。）</p>
</li>
<li>
<p><code>WasBanned</code> （9用户被封（数据：执行封禁操作的用户的 Steam ID）。）</p>
</li>
<li>
<p><code>Disconnected</code> （10用户掉线。）</p>
</li>
<li>
<p><code>HistoricalChat</code> （11来自用户的聊天历史记录的聊天消息或离线消息。）</p>
</li>
<li>
<p><code>LinkBlocked</code> （14聊天过滤器移除了一个链接。）</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="SteamID"><a class="anchor" href="#SteamID"></a>2. SteamID</h2>
<div class="sectionbody">
<div class="paragraph">
<p>代表 <code>CSteamID</code> 的对象。</p>
</div>
<div class="paragraph">
<p>`SteamID`对象有如下方法:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isAnonymous()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是一个匿名账号。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isAnonymousGameServer()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否为匿名游戏服务器id。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isAnonymousGameServerLogin()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Returns whether it is an anonymous game server login that will be filled in.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isAnonymousUser()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是匿名用户账号 （用于创建账户或重置密码）。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isChatAccount()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是一个聊天account id。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isClanAccount()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是一个小组account id。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isConsoleUserAccount()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是PSN好友账号的虚拟SteamID。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isContentServerAccount()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是一个内容服务器的account id。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isGameServerAccount()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是一个游戏服务器的account id （要么是持久，要么是匿名）。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isIndividualAccount()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是一个单独用户的account id。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isPersistentGameServerAccount()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否是一个持久（非匿名）的游戏服务器account id。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isLobby()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否为聊天account id。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getAccountID()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个代表用户身份的 <code>Integer</code> 值。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getRawSteamID()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回代表SteamID的 <code>String</code> 值（将CSteamID转换为64位的形式）。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getAccountType()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回 <code>greenworks.AccountType</code> 字段。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.isValid()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回是否为有效account。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getStaticAccountKey()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个代表64位静态account key的字符串。</p>
</div>
<div class="paragraph">
<p>他会将SteamID中静态的部分转换为64位的形式。 对于多座位用户（比如网吧用户），该账户的所有实例都具有相同的静态account key，因此可以通过静态account key将他们分在一组中。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getPersonaName()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个代表用户名字的字符串。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getNickname()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回当前用户为指定玩家设置的昵称 <code>String</code>。 如果没有为该玩家设置昵称，则为空。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getRelationship()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code><a href="#FriendRelationship">Integer</a></code> 代表与用户关系的。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SteamID.getSteamLevel()</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>Integer</code> 代表steam等级的。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_方法"><a class="anchor" href="#_方法"></a>3. 方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_获取好友数量"><a class="anchor" href="#_获取好友数量"></a>3.1. 获取好友数量</h3>
<div class="paragraph">
<p><strong>greenworks.getFriendCount(friend_flag)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>friend_flag</code> greenworks.FriendFlags</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>Integer</code> 表示好友的人数。</p>
</div>
</div>
<div class="sect2">
<h3 id="_根据类型获取所有好友"><a class="anchor" href="#_根据类型获取所有好友"></a>3.2. 根据类型获取所有好友</h3>
<div class="paragraph">
<p><strong>greenworks.getFriends(friend_flag)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>friend_flag</code> greenworks.FriendFlags</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回 <a href="#SteamID">SteamID</a> 对象数组，每个 <code>SteamID</code> 表示一个朋友。</p>
</div>
</div>
<div class="sect2">
<h3 id="RequestUserInformation"><a class="anchor" href="#RequestUserInformation"></a>3.3. 请求用户信息</h3>
<div class="paragraph">
<p><strong>greenworks.requestUserInformation(raw_steam_id, require_name_only)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raw_steam_id</code> String: 64位形式的SteamId，从 <code>SteamID.getRawSteamID()</code> 获得</p>
</li>
<li>
<p><code>require_name_only</code> Boolean:只返回昵称（true）吗？ 还是同时返回名称和头像（false）？</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>请求指定用户的昵称及头像（可选）。 如果返回 true 表示已请求数据，收到数据时将会触发 <code>persona-state-changed</code> 回调； 如果返回 false 表示已经有了该用户的详细数据，需要这些信息的函数可立即使用。</p>
</div>
<div class="paragraph">
<p>如果 <code>require_name_only</code> 是true，则会下载该用户的头像（下载头像非常缓慢，并且会改动本地缓存，所以如果不需要头像，请勿发出请求）。</p>
</div>
</div>
<div class="sect2">
<h3 id="_获取好友小型头像"><a class="anchor" href="#_获取好友小型头像"></a>3.4. 获取好友小型头像</h3>
<div class="paragraph">
<p><strong>greenworks.getSmallFriendAvatar(raw_steam_id)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raw_steam_id</code> String: 64位格式的SteamId，从 <code>SteamID.getRawSteamID()</code> 获得</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>获取小型（32*32 像素）头像。 返回的integer型句柄可以被 <code>getImageRGBA()</code> 使用； 如果未设置头像则返回 0。</p>
</div>
</div>
<div class="sect2">
<h3 id="_获取好友中型头像"><a class="anchor" href="#_获取好友中型头像"></a>3.5. 获取好友中型头像</h3>
<div class="paragraph">
<p><strong>greenworks.getMediumFriendAvatar(raw_steam_id)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raw_steam_id</code> String: 64位格式的SteamId，从 <code>SteamID.getRawSteamID()</code> 获得</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>获取中型（64*64 像素）头像。 返回的integer型句柄可以被 <code>getImageRGBA()</code> 使用； 如果未设置头像则返回 0。</p>
</div>
</div>
<div class="sect2">
<h3 id="_获取好友大型头像"><a class="anchor" href="#_获取好友大型头像"></a>3.6. 获取好友大型头像</h3>
<div class="paragraph">
<p><strong>greenworks.getLargeFriendAvatar(raw_steam_id)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raw_steam_id</code> String: 64位格式的SteamId，从 <code>SteamID.getRawSteamID()</code> 获得</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>获取大型（128*128 像素）头像。 返回的integer型句柄可以被 <code>getImageRGBA()</code> 使用； 如果未设置头像则返回 0； 如果图像数据尚未载入并请求下载，返回 -1。 在此情况下，请等待 <code>avatar-image-loaded</code> 回调，然后再次调用。</p>
</div>
</div>
<div class="sect2">
<h3 id="_设置监听好友消息"><a class="anchor" href="#_设置监听好友消息"></a>3.7. 设置监听好友消息</h3>
<div class="paragraph">
<p><strong>greenworks.setListenForFriendsMessage(intecept_enabled)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>intercept_enabled</code> Boolean 启用（true）或关闭（(false）拦截好友消息？</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>设置监听 Steam 好友的聊天消息事件 (<code>game-connected-friend-chat-message</code>)。 返回一个 <code>Boolean</code>，表示是否成功设置了侦听器。</p>
</div>
</div>
<div class="sect2">
<h3 id="_回复好友消息"><a class="anchor" href="#_回复好友消息"></a>3.8. 回复好友消息</h3>
<div class="paragraph">
<p><strong>greenworks.replyToFriendMessage(raw_steam_id, message)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raw_steam_id</code> String: 要发送消息至的好友的 Steam ID。</p>
</li>
<li>
<p><code>message</code> String: 待发送的 UTF-8 格式消息。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>给 Steam 好友发送一则消息。 返回一个 <code>Boolean</code>，表示消息是否成功发送。</p>
</div>
</div>
<div class="sect2">
<h3 id="_获取好友消息"><a class="anchor" href="#_获取好友消息"></a>3.9. 获取好友消息</h3>
<div class="paragraph">
<p><strong>greenworks.getFriendMessage(raw_steam_id, message_id, maximum_message_size)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raw_steam_id</code> String: 发出该消息的好友的 Steam ID。</p>
</li>
<li>
<p><code>message_id</code> Integer 消息的索引。 应为 GameConnectedFriendChatMsg_t 的 m_iMessageID 字段。</p>
</li>
<li>
<p><code>maximum_message_size</code> Integer 缓冲区接收的最大消息大小</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>String</code>，表示来自朋友的消息。</p>
</div>
</div>
<div class="sect2">
<h3 id="_获取好友姓名显示名称"><a class="anchor" href="#_获取好友姓名显示名称"></a>3.10. 获取好友姓名（显示名称）</h3>
<div class="paragraph">
<p><strong>greenworks.getFriendPersonaName(raw_steam_id)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raw_steam_id</code> String: 另一位用户的 Steam ID。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回表示指定用户个人（显示）姓名的 <code>String</code>。</p>
</div>
</div>
<div class="sect2">
<h3 id="_设置当前用户的丰富状态键值"><a class="anchor" href="#_设置当前用户的丰富状态键值"></a>3.11. 设置当前用户的丰富状态键/值</h3>
<div class="paragraph">
<p><strong>greenworks.setRichPresence(pchKey, pchValue)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pchKey</code> String: 要设置的丰富状态 'key'。 不可比 <a href="https://partner.steamgames.com/doc/api/ISteamFriends#k_cchMaxRichPresenceKeyLength">k_cchMaxRichPresenceKeyLength</a> 中指定的长。</p>
</li>
<li>
<p><code>pchValue</code> String: 要与 <code>pchKey</code> 关联的丰富状态 'value'。 不可比 <a href="https://partner.steamgames.com/doc/api/ISteamFriends#k_cchMaxRichPresenceValueLength">k_cchMaxRichPresenceValueLength</a> 中规定的长。 若设为空字符串（""）或 NULL，便会移除已设置的键。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>Boolean</code> 值:</p>
</div>
<div class="paragraph">
<p><code>true</code> 表示丰富状态设置成功。
<code>false</code> 有下面这些情况:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pchKey</code> 超过了 <code>k_cchMaxRichPresenceKeyLength</code> 中规定的大小，或者长度为 0</p>
</li>
<li>
<p><code>pchValue</code> 超过了 <code>k_cchMaxRichPresenceValueLength</code> 中规定的大小。</p>
</li>
<li>
<p>用户已经达到了 <a href="https://partner.steamgames.com/doc/api/ISteamFriends#k_cchMaxRichPresenceKeys">k_cchMaxRichPresenceKeys</a> 指定的丰富状态键的最大数量。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_清除丰富状态"><a class="anchor" href="#_清除丰富状态"></a>3.12. 清除丰富状态</h3>
<div class="paragraph">
<p><strong>greenworks.ClearRichPresence()</strong></p>
</div>
<div class="paragraph">
<p>清除当前用户所有的丰富状态（Rich Presence）键/值。</p>
</div>
</div>
<div class="sect2">
<h3 id="_获取好友的丰富状态"><a class="anchor" href="#_获取好友的丰富状态"></a>3.13. 获取好友的丰富状态</h3>
<div class="paragraph">
<p><strong>greenworks.getFriendRichPresence(steamIDFriend, pchKey)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>steamIDFriend</code> String: 要获取其 Rich Presence 值的好友。</p>
</li>
<li>
<p><code>pchKey</code> String: 要请求的 Rich Presence 键。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>String</code> 值，表示指定好友的丰富状态</p>
</div>
</div>
<div class="sect2">
<h3 id="SetPlayedWith"><a class="anchor" href="#SetPlayedWith"></a>3.14. 设置和谁一起玩过</h3>
<div class="paragraph">
<p><strong>greenworks.setPlayedWith(steamIDUserPlayedWith)</strong></p>
</div>
<div class="paragraph">
<p>将目标用户标记为“一起玩过游戏的”。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>steamIDUserPlayedWith</code> String: 一起玩过游戏的另一位用户。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_获取好友正在玩的游戏"><a class="anchor" href="#_获取好友正在玩的游戏"></a>3.15. 获取好友正在玩的游戏</h3>
<div class="paragraph">
<p><strong>greenworks.getFriendGamePlayed(steamIDFriend)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>steamIDFriend</strong> String: 另一位用户的 Steam ID</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果好友在游戏中，则会返回一个 <a href="https://partner.steamgames.com/doc/api/ISteamFriends#FriendGameInfo_t">FriendGameInfo_t</a> 对象，否则会返回 <code>undefined</code> 。</p>
</div>
</div>
<div class="sect2">
<h3 id="_激活邀请游戏对话框"><a class="anchor" href="#_激活邀请游戏对话框"></a>3.16. 激活邀请游戏对话框</h3>
<div class="paragraph">
<p><strong>greenworks.activateGameOverlayInviteDialog(steamIDLobby)</strong></p>
</div>
<div class="paragraph">
<p>激活 Steam 界面，打开邀请对话框。 从此窗口发出进入该大厅的邀请。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>steamIDLobby</strong> String: 选定玩家将受邀进入的大厅的 Steam ID。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_打开特定用户的对话框"><a class="anchor" href="#_打开特定用户的对话框"></a>3.17. 打开特定用户的对话框</h3>
<div class="paragraph">
<p><strong>greenworks.activateGameOverlayToUser(pchDialog, CSteamID steamID)</strong></p>
</div>
<div class="paragraph">
<p>激活 Steam 界面，打开指定的对话框</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pchDialog</code> String:要打开的对话框</p>
</li>
<li>
<p><code>steamID</code> String: 要将此对话框打开至的上下文的 Steam ID。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>pchDialog有下面这些有效选项:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"steamid" - 打开界面网页浏览器，前往指定的用户或组资料。</p>
</li>
<li>
<p>"chat" - 打开与指定用户的聊天窗口，或加入组聊天。</p>
</li>
<li>
<p>"jointrade" - 打开以 <a href="https://partner.steamgames.com/doc/webapi/ISteamEconomy#StartTrade">ISteamEconomy/StartTrade</a> Web API 开始的 Steam 交易会话窗口。</p>
</li>
<li>
<p>"stats" - 打开界面网页浏览器，前往指定用户的统计。</p>
</li>
<li>
<p>"achievements" - 打开界面网页浏览器，前往指定用户的成就。</p>
</li>
<li>
<p>"friendadd" - 以最小模式打开界面，提示用户将目标用户加为好友。</p>
</li>
<li>
<p>"friendremove" - 以最小模式打开界面，提示用户移除目标好友。</p>
</li>
<li>
<p>"friendrequestaccept" - 以最小模式打开界面，提示用户接受传入的好友邀请。</p>
</li>
<li>
<p>"friendrequestignore" - 以最小模式打开界面，提示用户忽略传入的好友邀请。</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
  </body>
</html>
