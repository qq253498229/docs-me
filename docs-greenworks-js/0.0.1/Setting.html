<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>环境设置 :: 我的文档</title>
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">我的文档</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false"
              aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">主页</a>
        <a class="navbar-item" href="https://github.com/qq253498229/docs-me">源代码</a>
        <!--        <div class="navbar-item has-dropdown is-hoverable">-->
        <!--          <a class="navbar-link" href="#">Products</a>-->
        <!--          <div class="navbar-dropdown">-->
        <!--            <a class="navbar-item" href="#">Product A</a>-->
        <!--            <a class="navbar-item" href="#">Product B</a>-->
        <!--            <a class="navbar-item" href="#">Product C</a>-->
        <!--          </div>-->
        <!--        </div>-->
        <!--        <div class="navbar-item has-dropdown is-hoverable">-->
        <!--          <a class="navbar-link" href="#">Services</a>-->
        <!--          <div class="navbar-dropdown">-->
        <!--            <a class="navbar-item" href="#">Service A</a>-->
        <!--            <a class="navbar-item" href="#">Service B</a>-->
        <!--            <a class="navbar-item" href="#">Service C</a>-->
        <!--          </div>-->
        <!--        </div>-->
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary"
               href="https://github.com/qq253498229/docs-me/releases/download/latest/docs.zip">
             下载
            </a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs-greenworks-js" data-version="0.0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Greenworks-JS 文档</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Authentication.html">身份认证</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Achievement.html">成就</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Cloud.html">Steam 云服务</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="DLC.html">DLC</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Events.html">事件</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Friends.html">好友</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="Setting.html">环境设置</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Stats.html">统计</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Utils.html">工具方法</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Workshop.html">创意工坊</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="Lobby.html">匹配大厅</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Greenworks-JS 文档</span>
    <span class="version">0.0.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="index.html">Greenworks-JS 文档</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-neutralino-api/0.0.1/index.html">NeutralinoJS 文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-neutralino-api/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-pd2/0.0.1/index.html">PD2记录</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-pd2/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-peerjs/0.0.1/index.html">PEER JS</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-peerjs/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-actuator/3.3.3/index.html">Spring Boot Actuator</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-actuator/3.3.3/index.html">3.3.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-spring-boot-admin/0.0.1/index.html">SpringBootAdmin文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-spring-boot-admin/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-steamworks-rs/0.11.0/index.html">Steamworks for Rust</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-steamworks-rs/0.11.0/index.html">0.11.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-tauri/v1/index.html">Tauri API 文档</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-tauri/v1/index.html">v1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-testing-angular/中文/start.html">Testing Angular</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-testing-angular/中文/start.html">中文</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-me/0.0.1/index.html">个人记录</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-me/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-taiwu/0.0.1/index.html">太吾绘卷</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-taiwu/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../docs-palworld/0.0.1/index.html">幻兽帕鲁笔记</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs-palworld/0.0.1/index.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs-me/0.0.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Greenworks-JS 文档</a></li>
    <li><a href="Setting.html">环境设置</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/qq253498229/docs-greenworks-js/edit/master/modules/ROOT/pages/Setting.adoc">编辑本页</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="目录" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">环境设置</h1>
<div class="sect1">
<h2 id="_初始化_steamworks_api"><a class="anchor" href="#_初始化_steamworks_api"></a>1. 初始化 Steamworks API</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.initAPI()</strong></p>
</div>
<div class="paragraph">
<p>返回 <code>Boolean</code> ，表示是否成功初始化Steam API。</p>
</div>
<div class="paragraph">
<p>注意：测试时，您需要启动并登录Steam客户端，并在应用程序目录下创建一个带有Steam APP ID（或steamworks示例APP ID）的Steam_appid.txt文件。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_初始化"><a class="anchor" href="#_初始化"></a>2. 初始化</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.init()</strong></p>
</div>
<div class="paragraph">
<p>当成功初始化Steam API时，返回 <code>True</code>，否则会抛出一个异常。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_判断steam是否正在运行"><a class="anchor" href="#_判断steam是否正在运行"></a>3. 判断steam是否正在运行</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.isSteamRunning()</strong></p>
</div>
<div class="paragraph">
<p>返回一个 <code>Boolean</code> 值，表示steam是否在运行中。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_在需要的时候重启应用"><a class="anchor" href="#_在需要的时候重启应用"></a>4. 在需要的时候重启应用</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.restartAppIfNecessary(appId)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>appId</code> Integer: 游戏的APP ID</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果你的应用程序不是通过Steam启动的，这将向Steam发出启动应用程序的信号，然后导致你的应用退出。 调用 <code>restartAppIfNecessary()</code> 后，您不会有任何损失，但如果它返回 <code>true</code> ，则您的应用程序正在重新启动。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取游戏id"><a class="anchor" href="#_获取游戏id"></a>5. 获取游戏ID</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getAppId()</strong></p>
</div>
<div class="paragraph">
<p>返回一个 <code>Integer</code> 值，表示当前运行中的游戏id。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取游戏构建id"><a class="anchor" href="#_获取游戏构建id"></a>6. 获取游戏构建ID</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getAppBuildId()</strong></p>
</div>
<div class="paragraph">
<p>返回一个 <code>Integer</code> 值，表示游戏的构建id。 可能会根据游戏后台的更新而随时发生变化。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取steamid对象"><a class="anchor" href="#_获取steamid对象"></a>7. 获取SteamId对象</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getSteamId()</strong></p>
</div>
<div class="paragraph">
<p>返回一个表示当前用户的 <a href="https://github.com/greenheartgames/greenworks/blob/master/docs/friends.md#steamid">SteamID</a> 的对象。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取当前游戏语言"><a class="anchor" href="#_获取当前游戏语言"></a>8. 获取当前游戏语言</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getCurrentGameLanguage()</strong></p>
</div>
<div class="paragraph">
<p>返回一个 <code>Integer</code> 值，表示Steam中专门为该游戏设置的当前语言。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取当前ui的语言"><a class="anchor" href="#_获取当前ui的语言"></a>9. 获取当前UI的语言</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getCurrentUILanguage()</strong></p>
</div>
<div class="paragraph">
<p>返回一个 <code>String</code> 值，表示Steam UI中设置的当前语言。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取当前游戏安装目录"><a class="anchor" href="#_获取当前游戏安装目录"></a>10. 获取当前游戏安装目录</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getCurrentGameInstallDir()</strong></p>
</div>
<div class="paragraph">
<p>尚未实现.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取应用安装目录"><a class="anchor" href="#_获取应用安装目录"></a>11. 获取应用安装目录</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getAppInstallDir(app_id, buffer, buffer_size)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>app_id</strong> Integer: 游戏的APP ID</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>String</code> 值，表示应用安装目录的绝对路径。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取玩家数量"><a class="anchor" href="#_获取玩家数量"></a>12. 获取玩家数量</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getNumberOfPlayers(success_callback, [error_callback])</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>success_callback</code> Function(num_of_players)</p>
<div class="ulist">
<ul>
<li>
<p><code>num_of_players</code> Integer: Steam上当前游戏的玩家数量。</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>error_callback</code> Function(err)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_打开steam遮罩层"><a class="anchor" href="#_打开steam遮罩层"></a>13. 打开Steam遮罩层</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.activateGameOverlay(option)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>option</code> String: 有效的选项宝坤 <code>Friends</code>, <code>Community</code>, <code>Players</code>, <code>Settings</code>, <code>OfficialGameGroup</code>, <code>Stats</code> 和 <code>Achievements</code>。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>激活 <code>option</code> 指定的游戏遮罩层。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_是否启用steam遮罩层"><a class="anchor" href="#_是否启用steam遮罩层"></a>14. 是否启用Steam遮罩层</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.isGameOverlayEnabled()</strong></p>
</div>
<div class="paragraph">
<p>返回一个 <code>Boolean</code> 值，表示Steam遮罩层是否被启用或禁用。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_判断steam是否处于大屏幕模式"><a class="anchor" href="#_判断steam是否处于大屏幕模式"></a>15. 判断Steam是否处于大屏幕模式</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.isSteamInBigPictureMode()</strong></p>
</div>
<div class="paragraph">
<p>返回一个 <code>Boolean</code> 值，表示Steam是否处于大屏幕模式。如果应用程序不在Steam的 <code>游戏</code> 类别中，则始终返回 <code>false</code>。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_通过steam遮罩层打开web页面"><a class="anchor" href="#_通过steam遮罩层打开web页面"></a>16. 通过Steam遮罩层打开Web页面</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.activateGameOverlayToWebPage(url)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>url</code> String: 完整的url，例如。http://www.steamgames.com.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在steam游戏遮罩层中打开指定的url。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_判断是否购买了游戏"><a class="anchor" href="#_判断是否购买了游戏"></a>17. 判断是否购买了游戏</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.isSubscribedApp(appId)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>appId</code> Integer: 游戏的APP ID</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>Boolean</code>，表示用户是否购买了游戏。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_判断应用是否已安装"><a class="anchor" href="#_判断应用是否已安装"></a>18. 判断应用是否已安装</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.isAppInstalled(appId)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>appId</code> Integer: 应用的APP ID</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>Boolean</code>，表示应用是否已安装。该应用实际上可能不属于用户。</p>
</div>
<div class="paragraph">
<p>仅适用于应用本体，DLC使用的是 <code>isDLCInstalled</code> 。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取图片大小"><a class="anchor" href="#_获取图片大小"></a>19. 获取图片大小</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getImageSize(handle)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>handle</code> Integer: 要获取大小的图像句柄。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>对象</code>，包含图片的宽高值。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取图像字节"><a class="anchor" href="#_获取图像字节"></a>20. 获取图像字节</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getImageRGBA(handle)</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>handle</code> Integer: 图片句柄</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>返回一个 <code>Buffer</code> ，表示RGBA格式的图片数据。</p>
</div>
<div class="paragraph">
<p>下面是保存 <code>png</code> 格式图片的示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var greeenworks = require('./greenworks');
// Relies on 'jimp' module. Install it via 'npm install jimp'.
var Jimp = require('jimp');

var friends = greenworks.getFriends(greenworks.FriendFlags.Immediate);
if (friends.length &gt; 0) {
  var handle = greenworks.getSmallFriendAvatar(friends[0].getRawSteamID());
  if (!handle) {
    console.log("The user don't set small avartar");
    return;
  }
  var image_buffer = greenworks.getImageRGBA(handle);
  var size = greenworks.getImageSize(handle);
  if (!size.height || !size.width) {
    console.log("Image corrupted. Please try again");
    return;
  }
  console.log(size);
  var image = new Jimp(size.height, size.width, function (err, image) {
    for (var i = 0; i &lt; size.height; ++i) {
      for (var j = 0; j &lt; size.width; ++j) {
        var idx = 4 * (i * size.height + j);
        var hex = Jimp.rgbaToInt(image_buffer[idx], image_buffer[idx+1],
            image_buffer[idx+2], image_buffer[idx+3]);
        image.setPixelColor(hex, j, i);
      }
    }
  });
  image.write("/tmp/test.png");
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取ip所在国家"><a class="anchor" href="#_获取ip所在国家"></a>21. 获取IP所在国家</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getIPCountry()</strong></p>
</div>
<div class="paragraph">
<p>返回客户端正在运行的 2 位 ISO 3166-1-alpha-2 格式的国家代码。 如“US”或“UK”。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_获取启动命令行"><a class="anchor" href="#_获取启动命令行"></a>22. 获取启动命令行</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>greenworks.getLaunchCommandLine()</strong></p>
</div>
<div class="paragraph">
<p>如果游戏通过 Steam URL 如 <code>steam://run/&lt;appid&gt;//&lt;command line&gt;/</code> 启动，则可以获取启动命令行。 此方法优于通过操作系统用命令行启动，后者可能存在安全隐患。 为了使丰富状态加入能使用此方式，而不被置于操作系统命令行，您必须在您应用的“安装”&gt;“通用安装”页面上启用“使用启动命令行”。</p>
</div>
<div class="paragraph">
<p><a href="https://partner.steamgames.com/doc/api/ISteamApps#GetLaunchCommandLine">Steam docs</a></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
  </body>
</html>
